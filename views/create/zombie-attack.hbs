<link rel='stylesheet' href='/stylesheets/style-attack.css' />
<div class="wrapper">
    <div class="zombie-preview">
        <img id="" src="/images/zombieparts/head-1@2x.png" class="head" alt="">
        <img src="/images/zombieparts/eyes-1@2x.png" class="eyes" alt="">
        <img src="/images/zombieparts/mouth-1@2x.png" class="mouth" alt="">
        <img src="/images/zombieparts/shirt-1@2x.png" class="shirt" alt="">
        <img src="/images/zombieparts/left-upper-arm-1@2x.png" class="left-upper" alt="">
        <img src="/images/zombieparts/right-upper-arm-1@2x.png" class="right-upper" alt="">
        <img src="/images/zombieparts/left-forearm-1@2x.png" class="left-forearm" alt="">
        <img src="/images/zombieparts/right-forearm-1@2x.png" class="right-forearm" alt="">
        <img src="/images/zombieparts/hand1-1@2x.png" class="hand1" alt="">
        <img src="/images/zombieparts/hand-2-1@2x.png" class="hand2" alt="">
        <img src="/images/zombieparts/catlegs.png" class="catlegs" alt="">
        <div class="zombie-name">
            <div class="name">Monster King</div>
            <hr>
            <div class="level">Level 1</div>
        </div>
    </div>
    <div class="zombie-preview">
        <img src="/images/zombieparts/head-2@2x.png" class="head" alt="">
        <img src="/images/zombieparts/eyes-2@2x.png" class="eyes" alt="">
        <img src="/images/zombieparts/mouth-2@2x.png" class="mouth" alt="">
        <img src="/images/zombieparts/shirt-2@2x.png" class="shirt" alt="">
        <img src="/images/zombieparts/left-upper-arm-1@2x.png" class="left-upper" alt="">
        <img src="/images/zombieparts/right-upper-arm-1@2x.png" class="right-upper" alt="">
        <img src="/images/zombieparts/left-forearm-1@2x.png" class="left-forearm" alt="">
        <img src="/images/zombieparts/right-forearm-1@2x.png" class="right-forearm" alt="">
        <img src="/images/zombieparts/hand1-1@2x.png" class="hand1" alt="">
        <img src="/images/zombieparts/hand-2-1@2x.png" class="hand2" alt="">
        <img src="/images/zombieparts/catlegs.png" class="catlegs" alt="">
        <div class="zombie-name">
            <div class="name">Lycan</div>
            <hr>
            <div class="level">Level 2</div>
        </div>
    </div>
    <div class="zombie-preview">
        <img src="/images/zombieparts/head-3@2x.png" class="head" alt="">
        <img src="/images/zombieparts/eyes-3@2x.png" class="eyes" alt="">
        <img src="/images/zombieparts/mouth-1@2x.png" class="mouth" alt="">
        <img src="/images/zombieparts/shirt-3@2x.png" class="shirt" alt="">
        <img src="/images/zombieparts/left-upper-arm-1@2x.png" class="left-upper" alt="">
        <img src="/images/zombieparts/right-upper-arm-1@2x.png" class="right-upper" alt="">
        <img src="/images/zombieparts/left-forearm-1@2x.png" class="left-forearm" alt="">
        <img src="/images/zombieparts/right-forearm-1@2x.png" class="right-forearm" alt="">
        <img src="/images/zombieparts/hand1-1@2x.png" class="hand1" alt="">
        <img src="/images/zombieparts/hand-2-1@2x.png" class="hand2" alt="">
        <img src="/images/zombieparts/catlegs.png" class="catlegs" alt="">
        <div class="zombie-name">
            <div class="name">Garen Asassin</div>
            <hr>
            <div class="level">Level 2</div>
        </div>
    </div>
    <div class="zombie-preview">
        <img src="/images/zombieparts/head-4@2x.png" class="head" alt="">
        <img src="/images/zombieparts/eyes-4@2x.png" class="eyes" alt="">
        <img src="/images/zombieparts/mouth-2@2x.png" class="mouth" alt="">
        <img src="/images/zombieparts/shirt-4@2x.png" class="shirt" alt="">
        <img src="/images/zombieparts/left-upper-arm-1@2x.png" class="left-upper" alt="">
        <img src="/images/zombieparts/right-upper-arm-1@2x.png" class="right-upper" alt="">
        <img src="/images/zombieparts/left-forearm-1@2x.png" class="left-forearm" alt="">
        <img src="/images/zombieparts/right-forearm-1@2x.png" class="right-forearm" alt="">
        <img src="/images/zombieparts/hand1-1@2x.png" class="hand1" alt="">
        <img src="/images/zombieparts/hand-2-1@2x.png" class="hand2" alt="">
        <img src="/images/zombieparts/catlegs.png" class="catlegs" alt="">
        <div class="zombie-name">
            <div class="name">Queen of Pain</div>
            <hr>
            <div class="level">Level 2</div>
        </div>
    </div>
    <div class="hrrr"></div>
    <div class="zombie-enyme">
        <div class="zombie-preview">
            <img id="head" class="head" alt="">
            <img id="eyes" class="eyes" alt="">
            <img id="mouth" class="mouth" alt="">
            <img id="shirt" class="shirt" alt="">
            <img id="left-upper" src="/images/zombieparts/left-upper-arm-1@2x.png" class="left-upper" alt="">
            <img id="right-upper" src="/images/zombieparts/right-upper-arm-1@2x.png" class="right-upper" alt="">
            <img src="/images/zombieparts/left-forearm-1@2x.png" class="left-forearm" alt="">
            <img src="/images/zombieparts/right-forearm-1@2x.png" class="right-forearm" alt="">
            <img src="/images/zombieparts/hand1-1@2x.png" class="hand1" alt="">
            <img src="/images/zombieparts/hand-2-1@2x.png" class="hand2" alt="">
            <img src="/images/zombieparts/catlegs.png" class="catlegs" alt="">
            <div class="zombie-name">
                <div id="zombieName" class="name">Im Zombie</div>
                <hr>
                <div id="zombieLevel" class="level">Lv: 25</div>
            </div>
        </div>
    </div>
</div>
<script>
    window.addEventListener('load', function () {
        var web3js = new Web3(web3.currentProvider);
        var cryptZombies = new web3js.eth.Contract(abi, contractAdress, {
            from: address1,
            data: data
        });

        var account = window.localStorage.getItem('account');
        console.log("40", account);

        getZombiesByOwner(account, cryptZombies, (hash) => {
            displayZombies(hash, cryptZombies);

        });

    });
    function displayZombies(ids, cryptoZombies) {
        for (id of ids) {
            // Look up zombie details from our contract. Returns a `zombie` objec
            getZombieDetails(id, cryptoZombies, (hash) => {
                console.log("52", hash);
                console.log("54", hash.dna);
                var result = hash.dna;
                var head = (result.substring(0, 2) % 7) + 1;
                var eyes = (result.substring(2, 4) % 11) + 1;
                var mouth = (result.substring(4, 6) % 2) + 1;
                var shirt = (result.substring(6, 8) % 6) + 1;
                var left_upper = (result.substring(8, 10));
                var right_upper = (result.substring(10, 12));
                $("#head").attr("src", "/images/zombieparts/head-" + head + "@2x.png");
                $("#eyes").attr("src", "/images/zombieparts/eyes-" + eyes + "@2x.png");
                $("#mouth").attr("src", "/images/zombieparts/mouth-" + mouth + "@2x.png");
                $("#shirt").attr("src", "/images/zombieparts/shirt-" + shirt + "@2x.png");
                $("#zombieName").text(hash.name);
                $("#zombieLevel").text(hash.level)
            });
        }
    }

    function getZombieDetails(id, cryptoZombies, hash) {
        cryptoZombies.methods.zombies(id).call(function (err, result) {
            hash(result);
        });
    }

    function zombieToOwner(id, cryptoZombies) {
        return cryptoZombies.methods.zombieToOwner(id).call()
    }

    function getZombiesByOwner(owner, cryptoZombies, hash) {
        cryptoZombies.methods.getZombiesByOwner(owner).call(function (err, result) {
            hash(result);
        });
    }
</script>